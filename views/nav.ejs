<div class="container-xl navbar bg-body-tertiary rounded bg-secondary bg-gradient" style="margin:15px 20px 25px 20px;">
    <div class="row w-100 align-items-center">
        <!-- Logo and text as a single link -->
        <div class="col-6 d-flex align-items-center">
            <a href="/" class="d-flex align-items-center text-decoration-none">
                <div class="btn btn-light d-flex align-items-center justify-content-center p-0" style="width: 60px; height: 60px; border-radius: 4px;">
                    <img src="/image/testImage.jpg" alt="Logo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 3px;">
                </div>
                <span class="ms-3 fw-bold text-light">DenT</span>
            </a>
        </div>
        
        <!-- User account actions - aligned right -->
        <div class="col-6 d-flex justify-content-end">
            <% if (session.user_id) { %>
                <div class="d-flex align-items-center gap-2">
                    <span class="text-light me-2 " style="margin-right: 30px;">üëã ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö, <strong><%= session.username %></strong></span>
                    <% if (session.user_id && session.customer_id) { %>
                        <a class="btn btn-info d-flex align-items-center justify-content-center" href="/inbox" style="width: 100px; height: 50px; border-radius: 4px; margin-right: 20px" role="button">
                            <div class="text-center">
                                <div style="width: 100%; height: 100%; object-fit: cover; font-size :100%">
                                    <div>üì©</div>
                                    <!-- <small>‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</small> -->
                                </div>
                            </div>
                        </a>
                    <% } %>
                    <a class="btn btn-danger d-flex align-items-center justify-content-center" href="/logout" style="width: 100px; height: 50px; border-radius: 4px;" role="button">Logout</a>
                </div>
                <script>
                    document.addEventListener("DOMContentLoaded", function () {
                        let hasNotifications = <%= JSON.stringify(session.hasNotifications) %>;
                        let storedNotification = sessionStorage.getItem("hasNotifications");
                
                        if (hasNotifications) {
                            if (storedNotification !== "false") {
                                alert("üì© ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà!");
                            }
                            sessionStorage.setItem("hasNotifications", "true");
                        } else {
                            sessionStorage.setItem("hasNotifications", "false");
                        }
                    });
                </script>
            <% } else { %>
                <a class="btn btn-primary d-flex align-items-center justify-content-center" href="/login" style="width: 100px; height: 50px; border-radius: 4px;" role="button">Login</a>
            <% } %>
        </div>
    </div>
    
    <!-- Navigation bar under the header -->
     <% if(session.role == "admin" || session.role == "dentist" || session.role == "employee"){%>
    <nav class="navbar navbar-expand-sm navbar-light bg-light rounded mt-3 w-100">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-sm-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/registercustomers">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/viewappointments">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/treatment_rec">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤</a> <!-- treatment_rec -->
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/treatment-list">‡πÅ‡∏à‡πâ‡∏á‡∏ö‡∏¥‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤</a> <!-- treatment-list -->  <!-- editcustomers --> <!-- appointment --> <!-- editdcustomers -->  <!-- alert -->
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/editcustomers">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/alert">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <%} else { %>
        <nav class="navbar navbar-expand-sm navbar-light bg-light rounded mt-3 w-100">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto mb-2 mb-sm-0">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="/">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/regappointments">‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≠</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/bills">‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤</a><!-- bills -->
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    <% } %>
    
    <!-- Add this custom CSS -->
    <style>
        /* Ensure toggle button only appears below 576px */
        @media (min-width: 835px) {
            .navbar-expand-sm .navbar-collapse {
                display: flex !important;
            }
            .navbar-expand-sm .navbar-toggler {
                display: none !important;
            }
            .navbar-nav {
                flex-direction: row !important;
            }
            .navbar-nav .nav-item {
                margin-right: 1rem;
            }
        }
        
        /* Only show hamburger menu below 576px */
        @media (max-width: 834px) {
            .navbar-expand-sm .navbar-collapse:not(.show) {
                display: none !important;
            }
            .navbar-expand-sm .navbar-toggler {
                display: block !important;
            }
            .navbar-nav {
                flex-direction: column !important;
            }
        }
    </style>
    
    <!-- Make sure Bootstrap JS is included -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get the navbar toggler
            const navbarToggler = document.querySelector('.navbar-toggler');
            const navbarNav = document.getElementById('navbarNav');
            
            // Add click event listener to toggle on phone size only
            if (navbarToggler) {
                navbarToggler.addEventListener('click', function() {
                    navbarNav.classList.toggle('show');
                });
            }
        });
    </script>
</div>